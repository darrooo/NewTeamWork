<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <title>TeamWork</title>
  <!--CSS filer som tillhör homepage-->
  <link rel="stylesheet" type="text/css" href="\css\homepagestyle.css">
  <link rel="stylesheet" href="/css/calendarstyle.css">

  <!--JS filer som tillhör homepage-->
  <script type="text/javascript" src="js/homepagescript.js"> </script>
  <script src="/socket.io/socket.io.js" defer></script>
  <script src="https://vuejs.org/js/vue.js"></script>
  <script src="js/vue_script.js" defer></script>
  <script src="/vue/vue.js" defer></script>
  <!--<script src="https://cdn.socket.io/socket.io-1.0.0.js"defer></script>-->
  <!--<script src="./dataHandler.js"defer></script>-->


  <!-- Fonts som kanske borde ligga i CSSen-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500&display=swap">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>

<body>
  <section id="page">
    <header>
      <div class="headerimage">
        <img src="images/header.png" alt="logga" height="105px">

        <div class="profile" id="sendbuttons">
          <button onclick="location.href='/chat';" type="button" name="button" class="invisiblebutton" id="buttonChat"> Chat </button>
          <button onclick="location.href='/myProfile';" type="button" name="button" class="invisiblebutton" id="buttonProfile"> My profile </button>
          <button onclick="location.href='/settings';" type="button" name="button" class="invisiblebutton" id="buttonSettings">  Settings </button>
          <button v-on:click="logoutButtonClicked()" type="button" name="button" class="invisiblebutton" id="buttonLogout">  Logout </button>
        </div>
      </div>
    </header>

    <div class="dropdown">
      <button class="dropbtn"><img src="images/options.png" alt="test" height="50px" class="invisibledropdown"></button>
      <div class="dropdown-content">
        <a class="menuLink" onclick="location.href='/myProfile';">My profile</a>
        <a class="menuLink" onclick="location.href='/chat';">Chat</a>
        <a class="menuLink" onclick="location.href='/settings';">Settings</a>
        <a class="menuLink" v-on:click="logoutButtonClicked()">Sign out</a>
      </div>
    </div>

    <nav class="navRight">
      <div class="nav_head">
        <h1>My Profile</h1>
      </div>
      <div class="nav_thisisme">
        <p>Namn
          <br>
          Projekt</p>
        </div>
        <div class="nav_calendar">
          <div class="dailyCalendar">
            <div class="calendarHeader">
              <i class="fas fa-angle-left prevDay"></i>
              <div class="thisDay">
                <h1></h1>
                <p></p>
              </div>
              <i class="fas fa-angle-right nextDay"></i>
            </div>

            <div class="event">
              <div class="hours"></div>
            </div>
          </div>
        </div>
      </nav>

      <div class="navLeft">
        <div class="myColleagues"> </div>
      </div>

      <footer> Footer </footer>

    </section>
    <script src="js/homepagescript.js"></script>


  </body>



  <script src="/socket.io/socket.io.js"></script>

  <script>


  var socket = io();
  var getAllTheUsers = [];
  var allTheUsers = [];
  var currentUser;

  socket.emit('getAllMyUsers', getAllTheUsers);


  socket.on('getAllMyUsers', function(d){
    //console.log("the users" + currentUsers);
    getAllTheUsers = d.allCurrentUsers;
    currentUser=d.thisUser;
    // getAllTheUsers.forEach(users => {
    //   console.log("the users" + users.name);
    //   allTheUsers += users.name;
    //   console.log("får vi upp alla namn här?: " + allTheUsers);
    //
    // });
    var allColleagues = () => {
    var divColleagues = document.querySelector('.myColleagues');
    let myColleagues = '';
      getAllTheUsers.forEach(users => {
        console.log("den här användaren: " + currentUser + " den som jämförs med: " + users.name);
        if (currentUser != users.name) {
          myColleagues += `<div class = "myColleagues"> ${ users.name}</div>`;
          divColleagues.innerHTML = myColleagues;
        }
      });
    }
    allColleagues();
  });


  var daily = new Date();

  var renderDaily = () => {

  const timeHours = document.querySelector('.hours');

  const weekdays = [
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday",
    "Sunday"
  ];

  //Veckodagen för den dag som syns på dagsvyn
  document.querySelector(".thisDay h1").innerHTML = weekdays[daily.getDay()-1];
  //Dagens datum som visas i headern
  document.querySelector(".thisDay p").innerHTML = new Date().toDateString();

  let hours = '';

  for(let hour = 7; hour <= 17; hour++){
    hours += `<div class = "hours">${hour}</div>`;
    timeHours.innerHTML = hours;
  //  console.log(timeHours);
   };
  }

  document.querySelector('.prevDay').addEventListener('click', () =>{
    daily.setDate(daily.getDate()-1)
    renderDaily();
  });

  document.querySelector('.nextDay').addEventListener('click', () =>{
    daily.setDate(daily.getDate()+1)
    renderDaily();
  });
  renderDaily();

  var menu = document.querySelector(".menu")
  var ham = document.querySelector(".ham")
  var xIcon = document.querySelector(".xIcon")
  var menuIcon = document.querySelector(".menuIcon")

  // ham.addEventListener("click", toggleMenu)

  function toggleMenu() {
    if (menu.classList.contains("showMenu")) {
      menu.classList.remove("showMenu");
      xIcon.style.display = "none";
      menuIcon.style.display = "block";
    } else {
      menu.classList.add("showMenu");
      xIcon.style.display = "block";
      menuIcon.style.display = "none";
    }
  }

  var menuLinks = document.querySelectorAll(".menuLink")

  menuLinks.forEach(
    function (menuLink) {
      menuLink.addEventListener("click", toggleMenu)
    }
  )

  </script>
  </html>
